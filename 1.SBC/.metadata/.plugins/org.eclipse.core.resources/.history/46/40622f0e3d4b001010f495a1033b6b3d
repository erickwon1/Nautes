<!DOCTYPE html>
<html data-bs-theme="light" lang="en-US" dir="ltr">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>SBC</title>

	<link rel="stylesheet" type="text/css" href="/resource/assets/css/reset.css">

	<link rel="stylesheet" type="text/css" th:href="@{/resource/assets/css/reset.css}">

	<link th:href="@{/resource/assets/css/bootstrap.min.css}" rel="stylesheet">
	<link rel="stylesheet" th:href="@{/resource/assets/css/bootstrap-icons.css}">
	<link rel="stylesheet" th:href="@{/resource/assets/css/animate.min.css}">

	<script th:src="@{/resource/assets/js/jquery-2.1.1.js}"></script>
	<script th:src="@{/resource/assets/js/bootstrap.bundle.min.js}"></script>
	<script th:src="@{/resource/assets/js/all.min.js}"></script>

	<link rel="stylesheet" type="text/css" th:href="@{/resource/assets/css/style.css}">
	<link rel="stylesheet" type="text/css" th:href="@{/resource/assets/css/login_style.css}">

	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script>
		$(document).ready(function () {
			let targetButtonId = null;
			const saveBtn = document.getElementById('saveRouteBtn');
			$('#r_type, #r_src, #r_method, #r_rprnum, #r_proxy_domain, #r_proxy_addr, #r_udpport,  #memo').on('keypress', function (key) {
				if (key.keyCode == 13) {
					resetPage();
					$("#searchFrm").submit();
				}
			});

			$('#selectAll').on('change', function () {
				$('.rowCheckbox').prop('checked', this.checked);
			});

			$(document).on("click", ".proxy-clickable", function () {
				const exId = $(this).data("ex-id");
				if (!exId) {
					alert("ex_idê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
					return;
				}
				loadExRouteData(exId);
			});

			$("#searchButton").click(function () {
				resetPage();
				$("#searchFrm").submit();
			});

			$("#insertButton").click(function () {
				if (confirm("ì¶”ê°€í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
					insertData().then(() => {  // ì¶”ê°€ ì™„ë£Œ í›„ ì‹¤í–‰
						clearInputFields();
						$('#searchButton').trigger("click");
					}).catch(error => {
						console.error("ì¶”ê°€ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
					});
				}
			});

			$("#deleteButton").click(function () {
				deleteData().then(() => {  // ì‚­ì œ ì™„ë£Œ í›„ ì‹¤í–‰
					clearInputFields();
					$('#searchButton').trigger("click");
				}).catch(error => {
					console.error("ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
				});
			});

			$("#modifyButton").click(function () {
				modifyData().then(() => {  // ì‚­ì œ ì™„ë£Œ í›„ ì‹¤í–‰
					$('#searchButton').trigger("click");
				}).catch(error => {
					console.error("ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
				});
			});

			$("#saveExRouteBtn").click(function () {
				saveExRoute();
			});
			document.getElementById('searchModalButton').addEventListener('click', () => {
				const formData = $("#searchFrm").serializeArray();
				console.log("ğŸ” ê²€ìƒ‰ ì¡°ê±´ í™•ì¸:", formData);
				targetButtonId = 'searchButton';
				saveBtn.textContent = 'ê²€ìƒ‰';
			});

			document.getElementById('insertModalButton').addEventListener('click', () => {
				targetButtonId = 'insertButton';
				saveBtn.textContent = 'ì¶”ê°€';
			});

			document.getElementById('modifyModalButton').addEventListener('click', () => {
				targetButtonId = 'modifyButton';
				saveBtn.textContent = 'ìˆ˜ì •';
			});

			$('#saveRouteBtn').on('click', function () {
				const routeModal = bootstrap.Modal.getInstance(document.getElementById('RouteModal'));
				routeModal.hide();
				if (targetButtonId) {
					$('#' + targetButtonId).trigger('click');
				}
				targetButtonId = null;
			});
		});
		function clearInputFields() {
			resetPage();
			$("#r_type").val("0");
			$("#r_src").val("");
			$("#r_method").val("ALL");
			$("#r_rprnum").val("");
			$("#r_proxy_domain").val("");
			$("#r_proxy_addr").val("");
			$("#r_udpport").val("");
			$("#memo").val("");
		}

		function resetPage() {
			$('#page').val("0");
		}

		function insertData() {
			return new Promise((resolve, reject) => {
				$.ajax({
					url: "/management/routingTable_add/insert",
					type: "POST",
					processData: false,
					data: $("#searchFrm").serialize(),
					success: function (data) {
						if (data === "OK") {
							alert("ì„±ê³µì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.");
							resolve();
						}
					},
					error: function (xhr) {
						if (xhr.status === 400) {
							let errors = xhr.responseJSON;
							$(".text-danger").remove();  // ê¸°ì¡´ ì˜¤ë¥˜ ë©”ì‹œì§€ ì œê±°
							Object.keys(errors).forEach(key => {
								let errorMessage = `<div class="text-danger">${errors[key]}</div>`;
								$(`*[name="` + key + `"]`).after(errorMessage);  // ì…ë ¥ í•„ë“œ ì•„ë˜ì— ì—ëŸ¬ ë©”ì‹œì§€ ì¶”ê°€
							});
						} else {
							alert("ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
						}
						reject();
					}
				});
			});
		}

		function deleteData() {
			// ì²´í¬ëœ ì²´í¬ë°•ìŠ¤ë“¤ì˜ ê°’ì„ ë°°ì—´ë¡œ ê°€ì ¸ì˜¤ê¸°
			var selectedValues = $("input[name='r_cnt']:checked").map(function () {
				return $(this).val();
			}).get();

			// ê°’ì´ ì—†ìœ¼ë©´ ê²½ê³  í›„ ì¢…ë£Œ
			if (selectedValues.length === 0) {
				alert("ì‚­ì œí•  í•­ëª©ì„ ì„ íƒí•˜ì„¸ìš”.");
				return;
			}

			return new Promise((resolve, reject) => {
				$.ajax({
					url: "/management/routingTable_add/delete",
					type: "POST",
					contentType: "application/json",
					data: JSON.stringify({
						r_cnt: selectedValues
					}),
					success: function (data) {
						alert("ì„±ê³µì ìœ¼ë¡œ " + data + "ê°œì˜ ë°ì´í„°ë¥¼ ì‚­ì œí–ˆìŠµë‹ˆë‹¤.");
						resolve();
					},
					error: function () {
						alert("ì‚­ì œë¥¼ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
						reject(error);
					}
				});
			});
		}

		function modifyData() {
			var selectedValues = $("input[name='r_cnt']:checked").map(function () {
				return $(this).val();
			}).get();
			if (selectedValues.length === 0) {
				alert("ìˆ˜ì •í•  í•­ëª©ì„ ì„ íƒí•˜ì„¸ìš”.");
				return;
			}
			if (!confirm(`${selectedValues.length}ê°œì˜ routing tableì„ ìˆ˜ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
				return;
			}

			const data = {
				r_cnt: selectedValues,
				r_type: $('#r_type').val(),
				r_src: $('#r_src').val(),
				r_method: $('#r_method').val(),
				r_rprnum: $('#r_rprnum').val(),
				r_proxy_domain: $('#r_proxy_domain').val(),
				r_proxy_addr: $('#r_proxy_addr').val(),
				r_udpport: $('#r_udpport').val(),
				memo: $('#memo').val()
			};

			$.ajax({
				url: '/management/routingTable_add/modify',
				type: 'POST',
				contentType: 'application/json',
				data: JSON.stringify(data),
				success: function (res) {
					alert(`ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.`);
					location.reload();
				},
				error: function (xhr, status, error) {
					alert('ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
					console.error(error);
				}
			});
		}

		function loadExRouteData(exId) {
			$.ajax({
				type: "POST",
				url: "/management/ExRouteData",
				data: {exId: exId},
				success: function (data) {
					$("#ex_id").val(data.ex_id || exId);
					$("#pri_domain").val(data.pri_domain || "");
					$("#pri_addr").val(data.pri_addr || "");
					$("#pri_priorty").val(data.pri_priorty || "");
					$("#pri_port").val(data.pri_port || "");
					$("#sec_domain").val(data.sec_domain || "");
					$("#sec_addr").val(data.sec_addr || "");
					$("#sec_priorty").val(data.sec_priorty || "");
					$("#sec_port").val(data.sec_port || "");
					$("#ex_cnt").val(data.ex_cnt || "");

					$("#exRouteModal").modal("show");
				},
				error: function () {
					alert("exRoute ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
				}
			});
		}

		function saveExRoute() {
			$.ajax({
				url: "/management/saveExRoute",
				type: "POST",
				data: $("#exRouteForm").serialize(),
				success: function (res) {
					if (res === "SUCCESS") {
						alert("ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
						$("#exRouteModal").modal("hide");
					} else {
						alert("ì €ì¥ ì‹¤íŒ¨");
					}
				},
				error: function () {
					alert("ëª¨ë“  ê°’ì„ ì…ë ¥í•˜ì‹­ì‹œì˜¤.");
				}
			});
		}

		function change_page(page) {
			$('#page').val(page);
			$("#searchFrm").submit();
			$('.dynamic-page').removeClass('active');
			$(".dynamic-page").eq(page).addClass('active');
		}

		function updatePagination(data) {
			var pagination = $(".pagination");
			pagination.empty();
			$(data).find(".pagination").each(function () {
				pagination.append($(this));
			});
		}

		document.addEventListener("DOMContentLoaded", function () {
			const r_src = document.getElementById("r_src");
			const r_rprnum = document.getElementById("r_rprnum");
			const r_udpport = document.getElementById("r_udpport");
			const pri_domain = document.getElementById("pri_domain");
			const sec_domain = document.getElementById("sec_domain");
			const pri_addr = document.getElementById("pri_addr");
			const sec_addr = document.getElementById("sec_addr");
			const pri_port = document.getElementById("pri_port");
			const sec_port = document.getElementById("sec_port");

			r_src.addEventListener("input", function () {
				this.value = this.value.replace(/[^0-9]/g, "").slice(0, 4);
			});

			r_rprnum.addEventListener("input", function () {
				this.value = this.value.replace(/[^0-9]/g, "").slice(0, 11);
			});

			r_udpport.addEventListener("input", function () {
				this.value = this.value.replace(/[^0-9]/g, "").slice(0, 4);
			});

			pri_domain.addEventListener("input", function () {
				this.value = this.value.replace(/[^0-9.]/g, "").slice(0, 15);
			});

			sec_domain.addEventListener("input", function () {
				this.value = this.value.replace(/[^0-9.]/g, "").slice(0, 15);
			});

			pri_addr.addEventListener("input", function () {
				this.value = this.value.replace(/[^0-9.]/g, "").slice(0, 15);
			});

			sec_addr.addEventListener("input", function () {
				this.value = this.value.replace(/[^0-9.]/g, "").slice(0, 15);
			});

			pri_port.addEventListener("input", function () {
				this.value = this.value.replace(/[^0-9]/g, "").slice(0, 4);
			});

			sec_port.addEventListener("input", function () {
				this.value = this.value.replace(/[^0-9]/g, "").slice(0, 4);
			});

			const rows = document.querySelectorAll(".route-row");

			rows.forEach(row => {
				row.addEventListener("click", function () {
					const cells = row.querySelectorAll("td");
					const r_type = cells[1].textContent.trim();
					const r_src = cells[2].textContent.trim();
					const r_method = cells[3].textContent.trim();
					const r_rprnum = cells[4].textContent.trim();
					const r_proxy_domain = cells[5].textContent.trim();
					const r_proxy_addr = cells[6].textContent.trim();
					const r_udpport = cells[7].textContent.trim();
					const memo = cells[8].textContent.trim();
					console.log("udpport:", r_udpport);
					document.querySelector("#r_type").value = r_type;
					document.querySelector("#r_src").value = r_src;
					document.querySelector("#r_method").value = r_method;
					document.querySelector("#r_rprnum").value = r_rprnum;
					document.querySelector("#r_proxy_domain").value = r_proxy_domain;
					document.querySelector("#r_proxy_addr").value = r_proxy_addr;
					document.querySelector("#r_udpport").value = r_udpport;
					document.querySelector("#memo").value = memo;
				});
			});

			document.getElementById("helpButton").addEventListener("click", function () {
				let helpModal = new bootstrap.Modal(document.getElementById("helpModal"));
				helpModal.show();
			});
		});
	</script>

</head>

<body>
	<nav class="navbar fixed-top">
		<button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar"
			aria-controls="offcanvasNavbar">
			<i class="bi bi-list"></i>
		</button>
		<div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar"
			aria-labelledby="offcanvasNavbarLabel">
			<div class="offcanvas-header">
				<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
			</div>
			<div class="d-flex align-items-center border-bottom mb-3">
				<a class="nav-link" th:href="@{/management/routingTable_add}">
					<div class="d-flex align-items-center pt-3">
						<h1 style="font-size: 1.6rem;">SBC</h1>
					</div>
				</a>
			</div>
			<div class="offcanvas-body">
				<ul class="navbar-nav flex-column mb-3" id="navbarVerticalNav">
					<li class="nav-item">
						<ul class="nav" id="menu1">
							<li class="nav-item active">
								<a class="nav-link" th:href="@{/management/routingTable_add}">
									<div class="d-flex align-items-center"><span class="nav-link-text ps-1">Routing í…Œì´ë¸”
											ë“±ë¡</span>
									</div>
								</a>
								<!-- more inner pages-->
							</li>
							<li class="nav-item">
								<a class="nav-link" th:href="@{/management/sessions_info}">
									<div class="d-flex align-items-center"><span class="nav-link-text ps-1">í˜„ì¬ ì„¸ì…˜
											ì •ë³´</span>
									</div>
								</a>
								<!-- more inner pages-->
							</li>
						</ul>
					</li>
				</ul>
				<div class="w-100 d-grid mb-3">
					<form id="logoutForm" action="/logout" method="post">
						<button class="btn btn-secondary btn-fill w-100" type="submit">ë¡œê·¸ì•„ì›ƒ</button>
					</form>
				</div>
			</div>
		</div>
	</nav>
	<main class="main" id="top">
		<div class="container ms-3" data-layout="container">
			<div class="content">
				<nav class="navbar navbar-light navbar-glass navbar-top navbar-expand">
					<button class="btn navbar-toggler-humburger-icon navbar-toggler me-1 me-sm-3" type="button"
						data-bs-toggle="collapse" data-bs-target="#navbarVerticalCollapse"
						aria-controls="navbarVerticalCollapse" aria-expanded="false"
						aria-label="Toggle Navigation"><span class="navbar-toggle-icon"><span
								class="toggle-line"></span></span></button>
				</nav>
				<h4 class="fw-bold py-2 mb-4">Routing í…Œì´ë¸” ë“±ë¡
					<button type="button" class="btn btn-sm btn-light border-0 p-0 " data-bs-toggle="modal"
						data-bs-target="#helpModal" style="font-size:1rem">
						<i class="bi bi-question-circle text-primary"></i>
					</button>
				</h4>
				<div class="row g-0 mb-4">
					<div class="col-md-12 col-xxl-12">
						<div class="card">
							<div class="card-body d-flex flex-wrap mt-3">
								<form class="d-flex w-100 flex-wrap">
									<input type="hidden" name="page" id="page">
									<!--									<div class="form-group d-flex w-100 flex-wrap search-wrap">-->
									<!--										<div class="d-flex w-100 flex-wrap">-->
									<!--											<div class="col-lg-4 pe-3 col-12 px-2 mb-3">-->
									<!--												<label for="routing_type_select" class="form-label">Routing Type</label>-->
									<!--												<span class="text-danger">*</span>-->
									<!--												<div class="d-flex justify-content-center align-items-center">-->
									<!--													<select class="form-select" id='r_type' name='r_type'>-->
									<!--														<option value="-1" th:selected="*{r_type=='-1'}">Routing Type ì„ íƒ-->
									<!--														</option>-->
									<!--														<option value="0" th:selected="*{r_type==0}">0. proxy (ë“±ë¡)-->
									<!--														</option>-->
									<!--														<option value="1" th:selected="*{r_type==1}">1. IP (ip â†’ proxy)-->
									<!--														</option>-->
									<!--														<option value="2" th:selected="*{r_type==2}">2. Proxy(proxy â†’-->
									<!--															ip)-->
									<!--														</option>-->
									<!--														<option value="3" th:selected="*{r_type==3}">3. Regi (SBCregi)-->
									<!--														</option>-->
									<!--														<option value="4" th:selected="*{r_type==4}">4. Prefix</option>-->
									<!--													</select>-->
									<!--												</div>-->
									<!--											</div>-->
									<!--											<div class="col-lg-4 pe-3 col-12 px-2 mb-3">-->
									<!--												<label for="routing_src_input" class="form-label">Routing Src</label>-->
									<!--												<span class="text-danger">*</span>-->
									<!--												<input type="text" class="form-control" placeholder="Routing src ì…ë ¥"-->
									<!--													id='r_src' name='r_src' th:value="*{r_src}">-->
									<!--											</div>-->
									<!--											<div class="col-lg-4 pe-3 col-12 px-2 mb-3">-->
									<!--												<label for="method_select" class="form-label">Method</label>-->
									<!--												<span class="text-danger">*</span>-->
									<!--												<div class="d-flex justify-content-center align-items-center">-->
									<!--													<select class="form-select" id='r_method' name='r_method'>-->
									<!--														<option value="" th:selected="*{r_method==''}">Method ì„ íƒ-->
									<!--														</option>-->
									<!--														<option value="ALL" th:selected="*{r_method=='ALL'}">ALL-->
									<!--														</option>-->
									<!--														<option value="Invite" th:selected="*{r_method=='Invite'}">-->
									<!--															Invite-->
									<!--														</option>-->
									<!--														<option value="Select" th:selected="*{r_method=='Select'}">-->
									<!--															Select-->
									<!--														</option>-->
									<!--													</select>-->
									<!--												</div>-->
									<!--											</div>-->
									<!--										</div>-->
									<!--										<div class="d-flex w-100 flex-wrap">-->
									<!--											<div class="col-lg-4 pe-3 col-12 px-2 mb-3">-->
									<!--												<label for="representative_num" class="form-label">ëŒ€í‘œë²ˆí˜¸</label>-->
									<!--												<input type="text" class="form-control" id='r_rprnum' name='r_rprnum'-->
									<!--													th:value="*{r_rprnum}" placeholder="ëŒ€í‘œë²ˆí˜¸ ì…ë ¥">-->
									<!--											</div>-->
									<!--											<div class="col-lg-4 pe-3 col-12 px-2 mb-3">-->
									<!--												<label for="proxy_domain_input" class="form-label"> Proxy domain</label>-->
									<!--												<span class="text-danger">*</span>-->
									<!--												<input type="text" class="form-control" id='r_proxy_domain'-->
									<!--													name='r_proxy_domain' th:value="*{r_proxy_domain}"-->
									<!--													placeholder="Proxy domain ì…ë ¥">-->
									<!--											</div>-->
									<!--											<div class="col-lg-4 pe-3 col-12 px-2 mb-3">-->
									<!--												<label for="proxy_addr_input" class="form-label">Proxy addr</label>-->
									<!--												<span class="text-danger">*</span>-->
									<!--												<input type="text" class="form-control" id='r_proxy_addr'-->
									<!--													name='r_proxy_addr' th:value="*{r_proxy_addr}"-->
									<!--													placeholder="Proxy addr ì…ë ¥">-->
									<!--											</div>-->
									<!--										</div>-->
									<!--										<div class="d-flex w-100 flex-wrap">-->
									<!--											<div class="col-lg-4 pe-3 col-12 px-2 mb-3">-->
									<!--												<label for="udp_port_input" class="form-label">UDP port</label>-->
									<!--												<input type="text" class="form-control" id='r_udpport' name='r_udpport'-->
									<!--													th:value="*{r_udpport}" placeholder="UDP port ì…ë ¥">-->
									<!--											</div>-->
									<!--											<div class="col-lg-4 pe-3 col-12 px-2 mb-3">-->
									<!--												<label for="memo_input" class="form-label">ì„¤ëª…</label>-->
									<!--												<input type="text" class="form-control" id="memo" name="memo"-->
									<!--													th:value="*{memo}" placeholder="ì„¤ëª… ì…ë ¥">-->
									<!--											</div>-->
									<!--										</div>-->
									<!--									</div>-->
									<div class="col-12 d-flex mt-3 flex-wrap">
										<button id="searchModalButton" class="btn btn-primary round-fill px-4 ms-auto"
											type="button" data-bs-toggle="modal"
											data-bs-target="#RouteModal">ê²€ìƒ‰</button>
										<button id="insertModalButton" class="btn btn btn-primary round-fill px-4 ms-2"
											type="button" data-bs-toggle="modal"
											data-bs-target="#RouteModal">ì¶”ê°€</button>
										<button id="modifyModalButton"
											class="btn btn btn-outline-primary round-fill px-4 ms-2" type="button"
											data-bs-toggle="modal" data-bs-target="#RouteModal">ìˆ˜ì •</button>
										<button id="deleteButton"
											class="btn btn btn-outline-primary round-fill px-4 ms-2 me-auto"
											type="button">ì„ íƒ ì‚­ì œ</button>
										<button id="searchButton" style="display: none;"></button>
										<button id="insertButton" style="display: none;"></button>
										<button id="modifyButton" style="display: none;"></button>
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
				<div class="row g-0 mb-4">
					<div class="col-md-12 col-xxl-12">
						<div class="card">
							<div class="card-body d-flex flex-wrap mt-3">
								<div class="table-responsive text-nowrap w-100" style="max-height: 740px;">
									<table class="table table-striped m-0 text-start table-hover">
										<colgroup>
											<col width="5%" />
											<col width="5%" />
											<col width="5%" />
											<col width="5%" />
											<col width="10%" />
											<col width="10%" />
											<col width="10%" />
											<col width="5%" />
											<col width="45%" />
										</colgroup>
										<thead>
											<tr>
												<th><input class="form-check-input ms-0" type="checkbox"
														id="selectAll">ì„ íƒ</th>
												<th>Type</th>
												<th>Src</th>
												<th>Method</th>
												<th>ëŒ€í‘œë²ˆí˜¸</th>
												<th>Proxy domain</th>
												<th>Proxy addr</th>
												<th>UDP port</th>
												<th>ì„¤ëª…</th>
											</tr>
										</thead>
										<tbody class="table-border-bottom-0">
											<tr th:each="route : ${routes}" class="route-row">
												<td><input class="form-check-input ms-0 rowCheckbox" type="checkbox"
														th:value="${route.r_cnt}" id="r_cnt" name="r_cnt"></td>
												<td th:text="${route.r_type}"></td>
												<td th:text="${route.r_src}"></td>
												<td th:text="${route.r_method}"></td>
												<td th:text="${route.r_rprnum}"></td>
												<td th:text="${route.r_proxy_domain}"></td>
												<td>
													<span class="proxy-clickable text-primary" style="cursor:pointer;"
														th:text="${route.r_proxy_addr}"
														th:data-ex-id="${route.r_proxy_addr}">
													</span>
												</td>
												<td th:text="${route.r_udpport}"></td>
												<td th:text="${route.memo}"></td>
											</tr>
										</tbody>
									</table>
								</div>
								<nav aria-label="Page navigation" class="w-100 mt-3 d-flex">
									<ul class="pagination mb-0 mx-auto">
										<li class="page-item" th:classappend="${!paging.hasPrevious} ? 'disabled':''">
											<a class="page-link"
												th:onclick="change_page([[${paging.startBlockPage-paging.pageBlock}]])"
												aria-label="Previous">
												<span aria-hidden="true">&laquo;</span>
											</a>
										</li>
										<li th:each="page : ${#numbers.sequence(paging.startBlockPage, paging.endBlockPage)}"
											th:classappend="${page == paging.number} ? 'active' : ''"
											class="page-item dynamic-page">
											<a th:text="${page+1}" class="page-link"
												th:onclick="change_page([[${page}]])"></a>
										</li>
										<li class="page-item" th:classappend="${!paging.hasNext} ? 'disabled':''">
											<a class="page-link" th:onclick="change_page([[${paging.endBlockPage+1}]])"
												aria-label="Next">
												<span aria-hidden="true">&raquo;</span>
											</a>
										</li>
									</ul>
								</nav>
							</div>
						</div>
					</div>
				</div>
				<div class="modal fade" id="RouteModal" tabindex="-1" aria-labelledby="RouteModalLabel"
					aria-hidden="true">
					<div class="modal-dialog modal-lg">
						<div class="modal-content">
							<form id="searchFrm" th:action="@{/management/routingTable_add}" method="post"
								th:object="${route}">
								<div class="modal-header">
									<h5 class="modal-title" id="RouteModalLabel">ROUTE ì •ë³´</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
								</div>
								<div class="modal-body">

									<!-- 1í–‰ -->
									<div class="row mb-3">
										<div class="col-lg-4">
											<label for="routing_type_select" class="form-label">Routing Type <span
													class="text-danger">*</span></label>
											<select class="form-select" id="r_type" name="r_type">
												<option value="-1" th:selected="*{r_type=='-1'}">Routing Type ì„ íƒ
												</option>
												<option value="0" th:selected="*{r_type==0}">0. proxy (ë“±ë¡)</option>
												<option value="1" th:selected="*{r_type==1}">1. IP (ip â†’ proxy)</option>
												<option value="2" th:selected="*{r_type==2}">2. Proxy (proxy â†’ ip)
												</option>
												<option value="3" th:selected="*{r_type==3}">3. Regi (SBCregi)</option>
												<option value="4" th:selected="*{r_type==4}">4. Prefix</option>
											</select>
										</div>
										<div class="col-lg-4">
											<label for="routing_src_input" class="form-label">Routing Src <span
													class="text-danger">*</span></label>
											<input type="text" class="form-control" id="r_src" name="r_src"
												th:value="*{r_src}" placeholder="Routing src ì…ë ¥">
										</div>
										<div class="col-lg-4">
											<label for="method_select" class="form-label">Method <span
													class="text-danger">*</span></label>
											<select class="form-select" id="r_method" name="r_method">
												<option value="" th:selected="*{r_method==''}">Method ì„ íƒ</option>
												<option value="ALL" th:selected="*{r_method=='ALL'}">ALL</option>
												<option value="Invite" th:selected="*{r_method=='Invite'}">Invite
												</option>
												<option value="Select" th:selected="*{r_method=='Select'}">Select
												</option>
											</select>
										</div>
									</div>

									<!-- 2í–‰ -->
									<div class="row mb-3">
										<div class="col-lg-4">
											<label for="representative_num" class="form-label">ëŒ€í‘œë²ˆí˜¸</label>
											<input type="text" class="form-control" id="r_rprnum" name="r_rprnum"
												th:value="*{r_rprnum}" placeholder="ëŒ€í‘œë²ˆí˜¸ ì…ë ¥">
										</div>
										<div class="col-lg-4">
											<label for="proxy_domain_input" class="form-label">Proxy domain <span
													class="text-danger">*</span></label>
											<input type="text" class="form-control" id="r_proxy_domain"
												name="r_proxy_domain" th:value="*{r_proxy_domain}"
												placeholder="Proxy domain ì…ë ¥">
										</div>
										<div class="col-lg-4">
											<label for="proxy_addr_input" class="form-label">Proxy addr <span
													class="text-danger">*</span></label>
											<input type="text" class="form-control" id="r_proxy_addr"
												name="r_proxy_addr" th:value="*{r_proxy_addr}"
												placeholder="Proxy addr ì…ë ¥">
										</div>
									</div>

									<!-- 3í–‰ -->
									<div class="row mb-3">
										<div class="col-lg-4">
											<label for="udp_port_input" class="form-label">UDP port</label>
											<input type="text" class="form-control" id="r_udpport" name="r_udpport"
												th:value="*{r_udpport}" placeholder="UDP port ì…ë ¥">
										</div>
										<div class="col-lg-4">
											<label for="memo_input" class="form-label">ì„¤ëª…</label>
											<input type="text" class="form-control" id="memo" name="memo"
												th:value="*{memo}" placeholder="ì„¤ëª… ì…ë ¥">
										</div>
									</div>

								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-primary" id="saveRouteBtn">1</button>
								</div>
							</form>
						</div>
					</div>
				</div>

				<div class="modal fade" id="exRouteModal" tabindex="-1" aria-labelledby="exRouteModalLabel"
					aria-hidden="true">
					<div class="modal-dialog modal-lg">
						<div class="modal-content">
							<form id="exRouteForm">
								<div class="modal-header">
									<h5 class="modal-title" id="exRouteModalLabel">EX ROUTE ì •ë³´</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
								</div>
								<div class="modal-body">
									<div class="row">
										<div class="col-md-6 mb-3">
											<label for="ex_id">EX ID</label>
											<input type="text" id="ex_id" name="ex_id" class="form-control" readonly>
										</div>
										<div class="col-md-6 mb-3"></div>
										<div class="col-md-6">
											<div class="mb-3">
												<label for="pri_domain">Pri domain</label>
												<input type="text" id="pri_domain" name="pri_domain"
													class="form-control">
											</div>
											<div class="mb-3">
												<label for="pri_addr">Pri addr</label>
												<input type="text" id="pri_addr" name="pri_addr" class="form-control">
											</div>
											<div class="mb-3">
												<label for="pri_priorty">Pri priorty</label>
												<select class="form-select" id='pri_priorty' name='pri_priorty'>
													<option value="" th:selected="*{pri_priorty==''}">Pri priorty ì„ íƒ
													</option>
													<option value="M" th:selected="*{pri_priorty=='M'}">M </option>
													<option value="S" th:selected="*{pri_priorty=='S'}">S</option>
												</select>
											</div>
											<div class="mb-3">
												<label for="pri_port">Pri port</label>
												<input type="text" id="pri_port" name="pri_port" class="form-control">
											</div>
										</div>
										<div class="col-md-6">
											<div class="mb-3">
												<label for="sec_domain">Sec domain</label>
												<input type="text" id="sec_domain" name="sec_domain"
													class="form-control">
											</div>
											<div class="mb-3">
												<label for="sec_addr">Sec addr</label>
												<input type="text" id="sec_addr" name="sec_addr" class="form-control">
											</div>
											<div class="mb-3">
												<label for="sec_priorty">Sec priorty</label>
												<select class="form-select" id='sec_priorty' name='sec_priorty'>
													<option value="" th:selected="*{sec_priorty==''}">Sec priorty ì„ íƒ
													</option>
													<option value="M" th:selected="*{sec_priorty=='M'}">M </option>
													<option value="S" th:selected="*{sec_priorty=='S'}">S</option>
												</select>
											</div>
											<div class="mb-3">
												<label for="sec_port">Sec port</label>
												<input type="text" id="sec_port" name="sec_port" class="form-control">
											</div>
										</div>
										<input type="hidden" id="ex_cnt" name="ex_cnt">
									</div>
								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-primary" id="saveExRouteBtn">ì €ì¥</button>
								</div>
							</form>
						</div>
					</div>
				</div>

				<div class="modal fade" id="helpModal" tabindex="-1" aria-labelledby="helpModalLabel"
					aria-hidden="true">
					<div class="modal-dialog modal-lg">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="helpModalLabel">Routing Type ì„¤ëª…</h5>
								<button type="button" class="btn-close" data-bs-dismiss="modal"
									aria-label="Close"></button>
							</div>
							<div class="modal-body">
								<p><strong>Routing Type</strong>ì€ í˜¸ì¶œì„ íŠ¹ì • ì„œë²„ë¡œ ë¼ìš°íŒ…í•˜ëŠ” ë°©ë²•ì„ ê²°ì •í•©ë‹ˆë‹¤.</p>
								<ul>
									<li><strong>1 â†’ ROUTE_TYPE_IP</strong>: í•´ë‹¹ IPì—ì„œ ì˜¤ëŠ” ì½œì„ í”„ë½ì‹œ ì„œë²„ë¡œ ë¸”ë¼ì¸ë“œ ë¼ìš°íŒ….</li>
									<li><strong>3 â†’ ROUTE_TYPE_LOCAL</strong>: ë¡œì»¬ ì‹œìŠ¤í…œì—ì„œ íŠ¹ì • ì„œë²„ë¡œ ë©”ì‹œì§€ë¥¼ ë¼ìš°íŒ… (SBCê°€ íŠ¹ì • ë²ˆí˜¸ë¡œ
										ë“±ë¡í• 
										ë•Œ ì‚¬ìš©).</li>
									<li><strong>4 â†’ ROUTE_TYPE_PREFIX</strong>: í”„ë¦¬í”½ìŠ¤ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë¼ìš°íŒ….
										<ul>
											<li>[TO][FROM][TOì—ì„œ ì œê±°í•  ìë¦¬ìˆ˜]</li>
											<li><code>[9][0][1]</code>: TOê°€ 9ë¡œ ì‹œì‘í•˜ëŠ” ë²ˆí˜¸ ì¤‘ 9ë¥¼ ì œê±° í›„ ë¼ìš°íŒ….<br>ì˜ˆ:
												<code>901012345678 â†’ 01012345678</code>
											</li>
											<li><code>[9][0707815][1]</code>: Toê°€ 9ë¡œ ì‹œì‘í•˜ê³  Fromì´ 0707815ì¼ ê²½ìš°, 9ë¥¼ ì œê±° í›„
												ë¼ìš°íŒ….<br>ì˜ˆ: <code>901012345678 â†’ 01012345678</code></li>
										</ul>
									</li>
									<li><strong>2 â†’ ROUTE_TYPE_PROXY</strong>: íŠ¹ì • í”„ë½ì‹œì—ì„œ ì˜¤ëŠ” ì½œì„ íŠ¹ì • ì„œë²„ë¡œ ë¼ìš°íŒ… (TYPE 1ê³¼
										ìœ ì‚¬í•˜ì§€ë§Œ
										ìš°ì„ ìˆœìœ„ê°€ PREFIXë³´ë‹¤ ë‚®ìŒ).</li>
									<li><strong>0 â†’ ROUTE_TYPE_PROXY (SBC)</strong>: SBCì—ì„œ ì—°ê²°ë˜ëŠ” Proxy ì¥ë¹„ ì¶”ê°€ í•„ìš”.</li>
								</ul>
								<p><strong>ìš°ì„ ìˆœìœ„</strong>: 1 â†’ 3 â†’ 4 â†’ 2 â†’ 0</p>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ë‹«ê¸°</button>
							</div>
						</div>
					</div>
				</div>

				<footer class="footer border-top mt-4">
					<div class="row g-0 justify-content-between fs--1 mt-4 mb-4">
						<div class="col-12 col-sm-auto text-start">
							<p class="mb-0 text-600">Nautes Technology | TEL. 031-463-4201</p>
						</div>
						<div class="col-12 col-sm-auto text-end">
							<p class="mb-0 text-600">COPYRIGHT â“’ 2012 NAUTES TECHNOLOGY INC.ALL RIGHTS RESERVED</p>
						</div>
					</div>
				</footer>
			</div>
		</div>
	</main>
</body>

</html>